matrix:
  include:
    - language: node_js
      node_js: '12'
      addons:
        sonarcloud:
          organization: "swsnu"
          token: 
            secure: "CDIFCv7h54NkRuLd/gxr3Ty1zyFC2oeSmTGJpeGrRBRIAceiGT87Vf0fNbiDF9AEXxCBzFDK38j6R5DHtW33VfUZEZzqLvioS+y8ne1i5svfwzpT/96D4a+GbNt4h/vDu+nCJf8zKIJHY1aZr4yzN267o7AK13cY2ThUgYFRazJ/RBNf6B9G13zyVTqODZZKEzWCxNgNQJqfdPoeUirn60o9x0uSbgxKGaqu6CrLw48VXYFPdAIFs9yPDvTxVB/fHWQh6Dwd7PfQ88xBn7Q3i1t9FeBPqDxz/crAPKTChb45W0LLh37CpBBmZaOuykcoQZWBvcWhrT8V1Owj08TasScACdQvbZrEBy8gVJT6U8sqDwhV91ouxmTMyj28Qp7B6SXvwMA6OgMN8alWXIdxYusVkRLfUBVvc8l5ONPQUkKS56dElSlESN86hkNjs9bHYuzlpUZvpntv04+s8S1QFKvKD8WO0P88PPsfpoPsEQf+80XZ6rzJ3NBkwKeIzs14dFRvip9+XorDEsjoL47aIikjaS4Csro4jJSYIdpd6DW/8HYzcuZXTG+tQNPeyH7i9K7fDff01VjcS/e15lhF2vv/OqDJCNSDIteQh4hTd/UDNJfqK/ThzsKOMCtmX2Y3iiJEjDbnjB509CSWs24G35zFyHOQAfy3hwgvRAkQ66E="
      cache:
        - yarn: true
      before_install:
        - cd frontend
      install:
        - yarn install
      script:
        - ./node_modules/.bin/eslint src/
        - yarn test --coverage --watchAll=false
        - cd .. && sonar-scanner

    - language: python
      python: '3.7'
      cache:
        - pip: true
      before_install:
        - cd backend
      install:
        - pip install -r requirements.txt
      script:
        - pylint **/*.py --load-plugins pylint_django
        - coverage run --source='.' manage.py test
        - coverage xml
