matrix:
  include:
    - language: node_js
      node_js: '12'
      addons:
        sonarcloud:
          organization: "swsnu"
          token:
            secure: "g1sUm6YvcaXQmb6wOS1eX72/L5H0PpofMkrweXycINb35c+E8LiF6vrAV8pD9kz/GaoQpOXhuV4/4qLpr9uWztmP5mB9QVizGgLDYbXBG5K1BOsYIAb5lNwstYCt4bbCzIoUZvD4GizC6zNcXMcCbQCBwiWEWGQQoBKgLJbAdl5j2A+CHBAi074ci3nN4tgx87mhoaHhqNE/BBV2VOoCgQyf3z2CX0snbWcbbZxMa26mjIjawF7tkoEhYqZx/EMOV4yXu4IWXPidYJjzjKDz5WRSxzhve4maqS5tj/fRvlMsPyU5URtjx5y4ovwYPfL/0oWDthv8RgvDkUBcQN3eQ+f/LxJBf6k2/qWXFPF4Ib/TZxZ91iWTVvIbs85CiVaY3wDuSnmovJH53D4YNpIJkskssIFrNIbGNmt8lOTdQYxEqmuuYfDbRBrN3Zjfm0KWY0G48vcE8+GVWsEuBUFX87P343Q6VJwOzwpcwf72FqxZapdPGsyc9uZFM0Zgi1NJjeqXowQIvFLNwy7C59quGXaRVADDTff8m+SqTXKj1C0h/OT/3zxg4+07eQHpebtieSJcQ8pdgsax3yQ+TVIZXs99dEKJniW+GDZUCXwQVH494I0e5zqni+HleHaL/4Vc8awdQ2/2ZSo6s5ETGJdNZToh6QWm/4mCiowtxDNGIq0="
      cache:
        - yarn: true
      before_install:
        - cd frontend
      install:
        - yarn install
      script:
        - ./node_modules/.bin/eslint src/
        - yarn test --coverage --watchAll=false
        - cd .. && sonar-scanner

    - language: python
      python: '3.7'
      cache:
        - pip: true
      before_install:
        - cd backend
      install:
        - pip install -r requirements.txt
      script:
        - pylint **/*.py --load-plugins pylint_django
        - coverage run --source='.' manage.py test
        - coverage xml
